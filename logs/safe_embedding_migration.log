2025-07-18 23:39:25 - safe_embedding_migration - INFO - Starting SAFE embedding migration to BAAI/bge-large-zh-v1.5 (1024 dimensions)
2025-07-18 23:39:26 - safe_embedding_migration - INFO - Step 1: Creating backup...
2025-07-18 23:39:26 - safe_embedding_migration - INFO - Creating backup collection: resumes_backup_20250718_233926
2025-07-18 23:39:26 - safe_embedding_migration - INFO - Backup successful: 18 documents copied to resumes_backup_20250718_233926
2025-07-18 23:39:26 - safe_embedding_migration - INFO - Backup created: resumes_backup_20250718_233926
2025-07-18 23:39:26 - safe_embedding_migration - INFO - Step 2: Creating new search index...
2025-07-18 23:39:26 - safe_embedding_migration - INFO - Creating new search index for 1024 dimensions...
2025-07-18 23:39:27 - safe_embedding_migration - INFO - New search index 'vector_search_index_1024' created successfully
2025-07-18 23:39:27 - safe_embedding_migration - INFO - After migration completes, you'll need to:
2025-07-18 23:39:27 - safe_embedding_migration - INFO - 1. Update your application to use the new index name
2025-07-18 23:39:27 - safe_embedding_migration - INFO - 2. Manually delete the old 'vector_search_index' from MongoDB Atlas
2025-07-18 23:39:27 - safe_embedding_migration - INFO - 3. Rename the new index to 'vector_search_index'
2025-07-18 23:39:27 - safe_embedding_migration - INFO - Step 3: Migrating document embeddings...
2025-07-18 23:39:27 - safe_embedding_migration - INFO - Starting migration of 18 documents...
2025-07-18 23:39:27 - safe_embedding_migration - INFO - Processing batch 1: documents 1 to 10
2025-07-18 23:45:11 - safe_embedding_migration - INFO - Processed 5/18 documents...
2025-07-18 23:45:53 - safe_embedding_migration - INFO - Processed 10/18 documents...
2025-07-18 23:45:53 - safe_embedding_migration - INFO - Batch 1 completed. Total processed: 10, Failed: 0
2025-07-18 23:45:53 - safe_embedding_migration - INFO - Processing batch 2: documents 11 to 18
2025-07-18 23:46:24 - safe_embedding_migration - INFO - Processed 15/18 documents...
2025-07-18 23:46:44 - safe_embedding_migration - INFO - Batch 2 completed. Total processed: 18, Failed: 0
2025-07-18 23:46:44 - safe_embedding_migration - INFO - Migration completed. Total processed: 18, Failed: 0
2025-07-18 23:46:44 - safe_embedding_migration - INFO - Step 4: Verifying migration...
2025-07-18 23:46:44 - safe_embedding_migration - INFO - Verifying migration with 10 sample documents...
2025-07-18 23:46:47 - safe_embedding_migration - INFO - Migration verification successful - all vectors have 1024 dimensions
2025-07-18 23:46:47 - safe_embedding_migration - INFO - Step 5: Updating environment configuration...
2025-07-18 23:46:47 - safe_embedding_migration - INFO - Environment configuration updated successfully
2025-07-18 23:46:47 - safe_embedding_migration - INFO - Backup collection: resumes_backup_20250718_233926
2025-07-18 23:46:47 - safe_embedding_migration - INFO - 
2025-07-18 23:46:47 - safe_embedding_migration - INFO - 2. Delete the old 'vector_search_index' (384 dimensions)
2025-07-18 23:46:47 - safe_embedding_migration - INFO - 3. Rename 'vector_search_index_1024' to 'vector_search_index'
2025-07-18 23:46:47 - safe_embedding_migration - INFO - 4. Test your application with the new embeddings
2025-07-18 23:46:47 - safe_embedding_migration - INFO - 5. If everything works, you can delete the backup collection
2025-07-18 23:46:47 - safe_embedding_migration - INFO - 6. Restart your application to use the new configuration
